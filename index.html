<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Document</title>
     <link rel="stylesheet" href="style.css">
     <!-- <script src="script.js"></script> -->
</head>
<body>
     <div class="mainDiv">
          <div class="centerDiv">
               <h1> Test Your Typing Skill </h1>
               <h2 id="msg"> </h2>
               <textarea name="" id="mywords" cols="100" rows="10" placeholder="Remember, Be Nice! "></textarea>
               <br>
               <button id="btn" class="mainbtn">Start</button>
          </div>
          
           
     </div>


<script>
     const setOfWords =["Dussehra is a festival celebrated in the Hindu religion.",
      "It is one of the most important festivals in India." ,
       "In addition, it is also one of the longest ones.",
        "People celebrated Dussehra with great enthusiasm and love, throughout the country.",
         "It is time for rejoicing for everyone.",
          "The students get ten-day-long holidays from their schools and colleges to thoroughly enjoy this festival."];
const msg=document.getElementById('msg');
const typeWord=document.getElementById('mywords');
const btn=document.getElementById('btn');
let startTime ,endTime;

 playGame=() =>{
     let randomNumber =Math.floor(Math.random()*setOfWords.length);
     msg.innerText=setOfWords[randomNumber]; 
     let date=new Date();
     startTime=date.getTime();
     btn.innerText="Done";
 }
 const endPlay= ()=>{
     let date=new Date();
     endTime=date.getTime();
     let totalTime = ((endTime - startTime)/1000);
     console.log(totalTime);

     let totalString = typeWord.value;
     let wordCount = wordCounter(totalString);

     console.log(wordCount);
     let speed =Math.round((wordCount/totalTime)*60);
     let finalMsg = "You typed total at "+speed +" words per minutes. ";
     console.log(finalMsg);
     finalMsg+=compareWords(msg.innerText,totalString);
     msg.innerText=finalMsg;
 }

 const wordCounter = (str) =>{
     let response =str.split(" ").length;
     return response;
 }

 const compareWords =(str1,str2)=>{
     let words1=str1.split(" ");
     let words2=str2.split(" ");
     let cnt=0;

     // arrayName then forEach then it will take whole function with value and index no. of that array
     words1.forEach(function(item,index){
          if(item == words2[index]){
               cnt++;
          }
     })
     let errorWords =(words1.length -cnt);
     return (cnt + "correct out of "+ words1.length +" words and the total number of error are "+errorWords+" . ");
 }

btn.addEventListener('click',function()
{
     console.log(this);
     if( this.innerText == 'Start')
     {
          typeWord.disabled=false;
          playGame();
     }
     else if(this.innerText=="Done")
     {
          typeWord.disabled=true;
          btn.innerText="Start";
          endPlay();
     }
})

</script>
</body>
</html>